{"version":3,"file":"Presetable.amd.js","sources":["../src/Presetable.module.js"],"sourcesContent":["/** Interface to implement presets for any Object 3D in THree.js\n *  Created by Boban Jordanoski 16.02.2021\n * \n *  TO.DO:\n *  - add TWEENS\n * const tweaks = {\n *       daylight: {\n *           ignore: [ \"intensity\" ],\n *           tween: {\n *               position: {\n *                  time: 0.5\n *              }\n *          }\n *      }\n *  };\n */\n\nconst Presetable = {\n\n    interface: {\n\n        /**\n         * Initialise Interfaces\n         * @param {Object} opts Object with default presets\n         * @param {Object} settings Configuration\n         */\n        initPresetable: function( opts, settings ){\n            this.presets  = opts || {};\n            this.settings = {\n                debug: true,\n                recursion: true\n            };\n\n            Object.assign( this.settings, settings );\n        },\n\n        /**\n         * Add Presets\n         * @param {Object} presets Object with list of presets\n         */\n        addPresets: function( presets ){\n    \n            let keys = Object.keys( presets );\n            let presetValues;\n            \n            keys.forEach( ( presetName ) => {\n    \n                presetValues = presets[ presetName ];\n    \n                // update existing\n                if ( this.presets[ presetName ] ){\n                    Object.assign( this.presets[ presetName ], presetValues );\n                }\n                // create new\n                else{\n                    this.presets[ presetName ] = presetValues;\n                } \n    \n                if ( this.settings.debug ) console.log( \"Preset \" + presetName +  \" created: \", this.presets[ presetName ] );\n            });\n\n        },\n    \n        /**\n         * Get Preset Definition by name\n         * @param {String} name Preset name\n         */\n        getPresetByName: function( name ){\n    \n            if ( typeof this.presets[ name ] === \"undefined\" || !this.presets[ name ] ){\n                console.warn( name + \" Preset is not defined!\" );\n                return null;\n            } \n            else {\n                return this.presets[ name ];\n            }\n        },\n\n        /**\n         * Create Object with presets from actuall Object\n         * @param {Array} properties List with property Names, which we write out\n         */\n        filterPreset: function( properties ){\n            \n            let preset = {};\n            let property = {};\n            \n            properties.forEach( ( key )=>{\n                \n                if ( !this[ key ] || typeof this[ key ] === \"undefined\" ) return;\n\n                if ( this[ key ].isEuler || this[ key ].isVector3 ){\n                    property[ key ] = this[ key ].toArray();\n                }\n                else if ( typeof this[ key ] === \"function\" ){\n                    property[ key ] = {};\n                }\n                else {\n                    property[ key ] = this[ key ];\n                }\n\n                Object.assign( preset, property );\n            });\n\n            if ( this.settings.debug ) console.log(\"Filtered Preset: \", preset );\n            return preset;\n        },\n    \n        /**\n         * Load preset \n         * @param {String} name Preset name\n         */\n        loadPreset: function( name ){\n    \n            let preset = this.getPresetByName( name );\n    \n            if ( !preset ) return;\n    \n            Object.keys( preset ).forEach( ( propertyName ) => {\n                \n                this.setPropertiesValues( this[ propertyName ], preset[ propertyName ] );\n                \n            });\n    \n            if ( this.settings.debug ) console.log( \"Preset \" + name + \" loaded: \", preset );\n        },\n\n        /**\n         * set Presetvalue to the Object property value\n         * @param {Object} property \n         * @param {} presetValues\n         */\n        setPropertiesValues: function( property, presetValues ){\n\n            // Object has not defined attribute as preset name\n            if ( typeof property === \"undefined\" || typeof presetValues === \"undefined\" ) return;\n                \n            // if Vector3 \n            if ( property.isVector3 || property.isEuler ){\n                property.set( ...presetValues );\n            }\n\n            // if function\n            else if ( property === \"function\" ){\n                property( presetValues ); \n            }\n\n            // if preset object is nested 1 level\n            else if ( this.settings.recursion && typeof property === \"object\" && Object.keys( property ).length > 0 ){\n\n                // recursion\n                Object.keys( presetValues ).forEach( ( nestedPropertyName ) => {\n\n                    this.setPropertiesValues( this[ nestedPropertyName ], presetValues[ nestedPropertyName ] );\n\n                });\n\n            } \n\n            // set simple value\n            else {\n                property = presetValues;\n            }\n        }\n\n    },\n\n    /**\n     * Implement and initialise interface\n     * @param {Object} instance Object3D insance\n     * @param {Object} presets Default presets\n     */\n    implement: function( instance, presets ){\n       \n        Object.assign( instance, Presetable.interface );\n        instance.initPresetable( presets );\n\n    }\n\n};\n\nexport { Presetable };\nexport default Presetable;"],"names":[],"mappings":"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"}