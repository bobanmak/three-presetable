{"version":3,"file":"Presetable.amd.js","sources":["../src/Presetable.module.js"],"sourcesContent":["/** Interface to implement presets for any Object 3D in THree.js\r\n *  Created by Boban Jordanoski 16.02.2021\r\n * \r\n *  TO.DO:\r\n *  - add TWEENS\r\n * const tweaks = {\r\n *       daylight: {\r\n *           ignore: [ \"intensity\" ],\r\n *           tween: {\r\n *               position: {\r\n *                  time: 0.5\r\n *              }\r\n *          }\r\n *      }\r\n *  };\r\n */\r\n\r\nconst Presetable = {\r\n\r\n    interface: {\r\n\r\n        /**\r\n         * Initialise Interfaces\r\n         * @param {Object} opts Object with default presets\r\n         * @param {Object} settings Configuration\r\n         */\r\n        initPresetable: function( opts, settings ){\r\n            this.presets  = opts || {};\r\n            this.settings = {\r\n                debug: false,\r\n                recursion: true\r\n            };\r\n\r\n            Object.assign( this.settings, settings );\r\n        },\r\n\r\n        /**\r\n         * Add Presets\r\n         * @param {Object} presets Object with list of presets\r\n         */\r\n        addPresets: function( presets ){\r\n    \r\n            let keys = Object.keys( presets );\r\n            let presetValues;\r\n            \r\n            keys.forEach( ( presetName ) => {\r\n    \r\n                presetValues = presets[ presetName ];\r\n    \r\n                // update existing\r\n                if ( this.presets[ presetName ] ){\r\n                    Object.assign( this.presets[ presetName ], presetValues );\r\n                }\r\n                // create new\r\n                else{\r\n                    this.presets[ presetName ] = presetValues;\r\n                } \r\n    \r\n                if ( this.settings.debug ) console.log( \"Preset \" + presetName +  \" created: \", this.presets[ presetName ] );\r\n            });\r\n\r\n        },\r\n    \r\n        /**\r\n         * Get Preset Definition by name\r\n         * @param {String} name Preset name\r\n         */\r\n        getPresetByName: function( name ){\r\n    \r\n            if ( typeof this.presets[ name ] === \"undefined\" || !this.presets[ name ] ){\r\n                console.warn( name + \" Preset is not defined!\" );\r\n                return null;\r\n            } \r\n            else {\r\n                return this.presets[ name ];\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create Object with presets from actuall Object\r\n         * @param {Array} properties List with property Names, which we write out\r\n         */\r\n        filterPreset: function( properties ){\r\n            \r\n            let preset = {};\r\n            let property = {};\r\n            \r\n            properties.forEach( ( key )=>{\r\n                \r\n                if ( !this[ key ] || typeof this[ key ] === \"undefined\" ) return;\r\n\r\n                if ( this[ key ].isEuler || this[ key ].isVector3 ){\r\n                    property[ key ] = this[ key ].toArray();\r\n                }\r\n                else if ( typeof this[ key ] === \"function\" ){\r\n                    property[ key ] = {};\r\n                }\r\n                else {\r\n                    property[ key ] = this[ key ];\r\n                }\r\n\r\n                Object.assign( preset, property );\r\n            });\r\n\r\n            if ( this.settings.debug ) console.log(\"Filtered Preset: \", preset );\r\n            return preset;\r\n        },\r\n    \r\n        /**\r\n         * Load preset \r\n         * @param {String} name Preset name\r\n         */\r\n        loadPreset: function( name ){\r\n    \r\n            let preset = this.getPresetByName( name );\r\n    \r\n            if ( !preset ) return;\r\n    \r\n            Object.keys( preset ).forEach( ( propertyName ) => {\r\n                \r\n                this.setPropertiesValues( this, preset, propertyName );\r\n                \r\n            });\r\n    \r\n            if ( this.settings.debug ) console.log( \"Preset \" + name + \" loaded: \", preset );\r\n        },\r\n        \r\n        /**\r\n        * ClearPresets\r\n         */\r\n        clearPresets: function(){\r\n\r\n            this.presets = {};\r\n        },\r\n\r\n        /**\r\n         * set Presetvalue to the Object property value\r\n         * @param {Object} property \r\n         * @param {} presetValues\r\n         */\r\n        setPropertiesValues: function( instance, preset, propertyName ){\r\n\r\n            let property     = instance[ propertyName ];\r\n            let presetValues = preset[ propertyName ];\r\n            \r\n            // Object has not defined attribute as preset name\r\n            if ( typeof property === \"undefined\" || typeof presetValues === \"undefined\" ) return;      \r\n\r\n            // if preset function\r\n            if ( typeof presetValues === \"function\" ){\r\n                \r\n                let value = presetValues( property );\r\n               \r\n                if ( value.isVector3 || value.isEuler ){\r\n                    instance[ propertyName ].copy( value );\r\n                } \r\n                else {\r\n                    instance[ propertyName ] = presetValues( property );\r\n                }\r\n                // old instance[ propertyName ] = presetValues( property );\r\n            }\r\n\r\n            // if Vector3 \r\n            else if ( property.isVector3 || property.isEuler ){\r\n                property.set( ...presetValues );\r\n            }\r\n\r\n            // if property function\r\n            else if ( typeof property === \"function\" ){\r\n                if ( Array.isArray( presetValues ) ){\r\n                    property( ...presetValues ); \r\n                } else {\r\n                    property( presetValues )\r\n                }\r\n            }\r\n\r\n            // if preset object is nested 1 level\r\n            else if ( this.settings.recursion && typeof property === \"object\" && Object.keys( property ).length > 0 ){\r\n\r\n                // recursion\r\n                Object.keys( presetValues ).forEach( ( nestedPropertyName ) => {\r\n\r\n                    this.setPropertiesValues( instance[ propertyName ], presetValues, nestedPropertyName );\r\n\r\n                });\r\n\r\n            } \r\n\r\n            // set simple value\r\n            else {\r\n                instance[ propertyName ] = presetValues;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Implement and initialise interface\r\n     * @param {Object} instance Object3D insance\r\n     * @param {Object} presets Default presets\r\n     */\r\n    implement: function( instance, presets ){\r\n       \r\n        Object.assign( instance, Presetable.interface );\r\n        instance.initPresetable( presets );\r\n\r\n    }\r\n\r\n};\r\n\r\nexport { Presetable };\r\nexport default Presetable;\r\n"],"names":[],"mappings":";;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;UACM,UAAU,GAAG;AACnB;IACA,IAAI,SAAS,EAAE;AACf;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ,cAAc,EAAE,UAAU,IAAI,EAAE,QAAQ,EAAE;IAClD,YAAY,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI,EAAE,CAAC;IACvC,YAAY,IAAI,CAAC,QAAQ,GAAG;IAC5B,gBAAgB,KAAK,EAAE,KAAK;IAC5B,gBAAgB,SAAS,EAAE,IAAI;IAC/B,aAAa,CAAC;AACd;IACA,YAAY,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC;IACrD,SAAS;AACT;IACA;IACA;IACA;IACA;IACA,QAAQ,UAAU,EAAE,UAAU,OAAO,EAAE;IACvC;IACA,YAAY,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC;IAC9C,YAAY,IAAI,YAAY,CAAC;IAC7B;IACA,YAAY,IAAI,CAAC,OAAO,EAAE,EAAE,UAAU,MAAM;IAC5C;IACA,gBAAgB,YAAY,GAAG,OAAO,EAAE,UAAU,EAAE,CAAC;IACrD;IACA;IACA,gBAAgB,KAAK,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,EAAE;IACjD,oBAAoB,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,EAAE,YAAY,EAAE,CAAC;IAC9E,iBAAiB;IACjB;IACA,qBAAoB;IACpB,oBAAoB,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,GAAG,YAAY,CAAC;IAC9D,iBAAiB;IACjB;IACA,gBAAgB,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAG,OAAO,CAAC,GAAG,EAAE,SAAS,GAAG,UAAU,IAAI,YAAY,EAAE,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,EAAE,GAAC;IAC7H,aAAa,CAAC,CAAC;AACf;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA,QAAQ,eAAe,EAAE,UAAU,IAAI,EAAE;IACzC;IACA,YAAY,KAAK,OAAO,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,WAAW,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE;IACvF,gBAAgB,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,yBAAyB,EAAE,CAAC;IACjE,gBAAgB,OAAO,IAAI,CAAC;IAC5B,aAAa;IACb,iBAAiB;IACjB,gBAAgB,OAAO,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC;IAC5C,aAAa;IACb,SAAS;AACT;IACA;IACA;IACA;IACA;IACA,QAAQ,YAAY,EAAE,UAAU,UAAU,EAAE;IAC5C;IACA,YAAY,IAAI,MAAM,GAAG,EAAE,CAAC;IAC5B,YAAY,IAAI,QAAQ,GAAG,EAAE,CAAC;IAC9B;IACA,YAAY,UAAU,CAAC,OAAO,EAAE,EAAE,GAAG,IAAI;IACzC;IACA,gBAAgB,KAAK,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,OAAO,IAAI,EAAE,GAAG,EAAE,KAAK,WAAW,KAAG,SAAO;AACjF;IACA,gBAAgB,KAAK,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,IAAI,IAAI,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE;IACnE,oBAAoB,QAAQ,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC;IAC5D,iBAAiB;IACjB,qBAAqB,KAAK,OAAO,IAAI,EAAE,GAAG,EAAE,KAAK,UAAU,EAAE;IAC7D,oBAAoB,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IACzC,iBAAiB;IACjB,qBAAqB;IACrB,oBAAoB,QAAQ,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE,GAAG,EAAE,CAAC;IAClD,iBAAiB;AACjB;IACA,gBAAgB,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC;IAClD,aAAa,CAAC,CAAC;AACf;IACA,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAG,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,MAAM,EAAE,GAAC;IACjF,YAAY,OAAO,MAAM,CAAC;IAC1B,SAAS;IACT;IACA;IACA;IACA;IACA;IACA,QAAQ,UAAU,EAAE,UAAU,IAAI,EAAE;IACpC;IACA,YAAY,IAAI,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC;IACtD;IACA,YAAY,KAAK,CAAC,MAAM,KAAG,SAAO;IAClC;IACA,YAAY,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,EAAE,YAAY,MAAM;IAC/D;IACA,gBAAgB,IAAI,CAAC,mBAAmB,EAAE,IAAI,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC;IACvE;IACA,aAAa,CAAC,CAAC;IACf;IACA,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAG,OAAO,CAAC,GAAG,EAAE,SAAS,GAAG,IAAI,GAAG,WAAW,EAAE,MAAM,EAAE,GAAC;IAC7F,SAAS;IACT;IACA;IACA;IACA;IACA,QAAQ,YAAY,EAAE,UAAU;AAChC;IACA,YAAY,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IAC9B,SAAS;AACT;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ,mBAAmB,EAAE,UAAU,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE;AACvE;IACA,YAAY,IAAI,QAAQ,OAAO,QAAQ,EAAE,YAAY,EAAE,CAAC;IACxD,YAAY,IAAI,YAAY,GAAG,MAAM,EAAE,YAAY,EAAE,CAAC;IACtD;IACA;IACA,YAAY,KAAK,OAAO,QAAQ,KAAK,WAAW,IAAI,OAAO,YAAY,KAAK,WAAW,KAAG,SAAO;AACjG;IACA;IACA,YAAY,KAAK,OAAO,YAAY,KAAK,UAAU,EAAE;IACrD;IACA,gBAAgB,IAAI,KAAK,GAAG,YAAY,EAAE,QAAQ,EAAE,CAAC;IACrD;IACA,gBAAgB,KAAK,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,OAAO,EAAE;IACvD,oBAAoB,QAAQ,EAAE,YAAY,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;IAC3D,iBAAiB;IACjB,qBAAqB;IACrB,oBAAoB,QAAQ,EAAE,YAAY,EAAE,GAAG,YAAY,EAAE,QAAQ,EAAE,CAAC;IACxE,iBAAiB;IACjB;IACA,aAAa;AACb;IACA;IACA,iBAAiB,KAAK,QAAQ,CAAC,SAAS,IAAI,QAAQ,CAAC,OAAO,EAAE;IAC9D,gBAAgB,QAAQ,CAAC,SAAG,YAAK,YAAY,EAAE,CAAC;IAChD,aAAa;AACb;IACA;IACA,iBAAiB,KAAK,OAAO,QAAQ,KAAK,UAAU,EAAE;IACtD,gBAAgB,KAAK,KAAK,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE;IACpD,oBAAoB,cAAQ,UAAK,YAAY,EAAE,CAAC;IAChD,iBAAiB,MAAM;IACvB,oBAAoB,QAAQ,EAAE,YAAY,GAAE;IAC5C,iBAAiB;IACjB,aAAa;AACb;IACA;IACA,iBAAiB,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;AACrH;IACA;IACA,gBAAgB,MAAM,CAAC,IAAI,EAAE,YAAY,EAAE,CAAC,OAAO,EAAE,EAAE,kBAAkB,MAAM;AAC/E;IACA,oBAAoB,IAAI,CAAC,mBAAmB,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,YAAY,EAAE,kBAAkB,EAAE,CAAC;AAC3G;IACA,iBAAiB,CAAC,CAAC;AACnB;IACA,aAAa;AACb;IACA;IACA,iBAAiB;IACjB,gBAAgB,QAAQ,EAAE,YAAY,EAAE,GAAG,YAAY,CAAC;IACxD,aAAa;IACb,SAAS;AACT;IACA,KAAK;AACL;IACA;IACA;IACA;IACA;IACA;IACA,IAAI,SAAS,EAAE,UAAU,QAAQ,EAAE,OAAO,EAAE;IAC5C;IACA,QAAQ,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC,SAAS,EAAE,CAAC;IACxD,QAAQ,QAAQ,CAAC,cAAc,EAAE,OAAO,EAAE,CAAC;AAC3C;IACA,KAAK;AACL;IACA;;;;;;;;;;;"}